// teste-conexao.js
const axios = require('axios');

async function testarConexao() {
  try {
    const response = await axios.get('https://api.sif-source.org/projects', {
      auth: {
        username: 'adminppi.source@presidencia.gov.br',
        password: 'PPI#source147'
      },
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'SPHostUrl': 'https://www.sif-source.org',
        'SPLanguage': 'pt-BR',
        'X-Requested-With': 'XMLHttpRequest'
      }
    });
    console.log('Conexão bem-sucedida!');
    console.log('Total de projetos:', response.data.length);
  } catch (error) {
    console.error('Erro na conexão:');
    console.error('Status:', error.response?.status);
    console.error('Mensagem:', error.response?.data || error.message);
    if (error.response?.headers) {
      console.log('Cabeçalhos de resposta:', error.response.headers);
    }
  }
}

testarConexao();